# Single AZ Ingress/Egress Gateway with Auto-generated VNET

This example demonstrates how to deploy an F5 Distributed Cloud (XC) Azure VNET Site with ingress/egress gateway functionality in a single availability zone using an auto-generated VNET.

## Configuration

This example creates:
- A new Azure Resource Group
- A new VNET with CIDR `172.10.0.0/16`
- Outside subnet: `172.10.11.0/24`
- Inside subnet: `172.10.31.0/24`
- F5 XC Azure VNET Site with ingress/egress gateway capabilities

## Prerequisites

1. **F5 Distributed Cloud Account**: You need an active F5 XC account
2. **Azure Subscription**: Valid Azure subscription with appropriate permissions
3. **Service Principal**: Azure Service Principal with contributor access
4. **F5 XC API Credentials**: API certificate (.p12 file) from F5 XC console

## Variables

| Name                             | Description                                   | Type     | Default             |
| -------------------------------- | --------------------------------------------- | -------- | ------------------- |
| name                             | Name of the Azure VNET Site                   | `string` | `"az-site-example"` |
| azure_rg_location                | Azure region where resources will be deployed | `string` | `"westus2"`         |
| azure_subscription_id            | Azure subscription ID                         | `string` | `""`                |
| azure_subscription_tenant_id     | Azure tenant ID                               | `string` | `""`                |
| azure_service_principal_appid    | Azure service principal application ID        | `string` | `""`                |
| azure_service_principal_password | Azure service principal password              | `string` | `""`                |
| xc_api_url                       | F5 XC API URL                                 | `string` | `""`                |
| xc_api_p12_file                  | Path to F5 XC API certificate (.p12 file)     | `string` | `""`                |

## Usage

1. **Clone the repository**:
   ```bash
   git clone <repository-url>
   cd terraform-xc-azure-vnet-site/examples/azure-vnet-site-ingress-egress-gw-single-az-autogenerated-vnet
   ```

2. **Set up your variables**:
   Create a `terraform.tfvars` file:
   ```hcl
   name = "my-xc-site"
   azure_rg_location = "eastus"
   azure_subscription_id = "your-subscription-id"
   azure_subscription_tenant_id = "your-tenant-id"
   azure_service_principal_appid = "your-sp-app-id"
   azure_service_principal_password = "your-sp-password"
   xc_api_url = "https://your-tenant.console.ves.volterra.io/api"
   xc_api_p12_file = "/path/to/your/api-cert.p12"
   ```

3. **Initialize and apply**:
   ```bash
   terraform init
   terraform plan
   terraform apply
   ```

## Outputs

| Name                | Description                              |
| ------------------- | ---------------------------------------- |
| site_name           | Name of the created F5 XC site           |
| site_id             | ID of the created F5 XC site             |
| vnet_id             | ID of the created Azure VNET             |
| resource_group_name | Name of the created Azure Resource Group |

## Clean Up

To destroy the resources:
```bash
terraform destroy
```
